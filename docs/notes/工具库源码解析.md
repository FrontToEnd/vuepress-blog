# å·¥å…·åº“æºç è§£æ

åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°è½¬æ¢å›ºå®šæ ¼å¼æˆ–è€…ç”ŸæˆæŒ‡å®šæ ¼å¼çš„éœ€æ±‚ï¼Œæ¯”å¦‚ç”Ÿæˆéšæœºé¢œè‰²ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºé‚®ç®±ã€èº«ä»½è¯ç­‰ç­‰ã€‚é‚£ä¹ˆä»Šå¤©å°±æ¥åˆ†æä¸€ä¸‹`github` çš„å¼€æºåº“[outils](https://github.com/proYang/outils "outils")ã€‚

## å®‰è£…

1. ç›´æ¥ä¸‹è½½`min`ç›®å½•ä¸‹çš„[outils.min.js](https://github.com/proYang/outils/blob/master/min/outils.min.js "outils.min.js")ä½¿ç”¨ï¼Œæ”¯æŒ UMD é€šç”¨æ¨¡å—è§„èŒƒã€‚

```html
<script src="outils.min.js"></script>
<script>
  var OS = outils.getOS();
</script>
```

2. ä½¿ç”¨ npm å®‰è£…

```html
npm install --save-dev outils
```

## ä½¿ç”¨

æ¨èæŒ‰éœ€å¼•å…¥ã€‚

```jsx
// åªå¼•å…¥éƒ¨åˆ†æ–¹æ³•('outils/<æ–¹æ³•å>')
const getOS = require("outils/getOS");
const OS = getOS();
```

## API

æ¥ä¸‹æ¥å°±é€ä¸€è¿›è¡Œ API çš„è§£è¯»ä¸æºç åˆ†æã€‚

### arrayEqual

**åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰ã€‚**

```jsx
/**
 * @description åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰
 * @param {Array} arr1
 * @param {Array} arr2
 * @return {Boolean}
 */
function arrayEqual(arr1, arr2) {
  // å¦‚æœä¸¤ä¸ªæ•°ç»„æ˜¯åŒä¸€å¼•ç”¨ï¼Œåˆ™æ„å‘³ç€ç›¸ç­‰
  if (arr1 === arr2) return true;

  // å¦‚æœæ•°ç»„é•¿åº¦ä¸åŒï¼Œåˆ™ä¸ç›¸ç­‰
  if (arr1.length !== arr2.length) return false;

  // å¦‚æœæ•°ç»„çš„æŸä¸€é¡¹ä¸åŒï¼Œåˆ™ä¸ç›¸ç­‰
  for (var i = 0; i < arr1.length; ++i) {
    if (arr1[i] !== arr2[i]) return false;
  }

  // å¦åˆ™æ„å‘³ç€ç›¸ç­‰
  return true;
}
```

### hasClass

**åˆ¤æ–­å…ƒç´ æ˜¯å¦æœ‰æŸä¸ª`class`ã€‚**

```jsx
/**
 *
 * @description åˆ¤æ–­å…ƒç´ æ˜¯å¦æœ‰æŸä¸ªclass
 * @param {HTMLElement} ele
 * @param {String} cls
 * @return {Boolean}
 */
function hasClass(ele, cls) {
  // é€šè¿‡æ­£åˆ™åˆ¤æ–­å…ƒç´ çš„classNameå±æ€§ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ç±»å
  return new RegExp("(\\s|^)" + cls + "(\\s|$)").test(ele.className);
}
```

### addClass

**ä¸ºå…ƒç´ æ·»åŠ `class`ã€‚**

```jsx
/**
 * @description ä¸ºå…ƒç´ æ·»åŠ class
 * @param {HTMLElement} ele
 * @param {String} cls
 */

var hasClass = require("./hasClass");

function addClass(ele, cls) {
  // å¦‚æœå…ƒç´ ä¸­ä¸å­˜åœ¨æŒ‡å®šç±»ååˆ™æ·»åŠ 
  if (!hasClass(ele, cls)) {
    // æ·»åŠ æ–¹å¼æ˜¯åœ¨å…ƒç´ çš„classNameå±æ€§åé¢è¿½åŠ æŒ‡å®šç±»å
    // ä¸è¦å¿˜è®°åŠ ä¸Šç©ºæ ¼ï¼Œå› ä¸ºç±»åä»¥ç©ºæ ¼åŒºåˆ†
    ele.className += " " + cls;
  }
}
```

### removeClass

**ä¸ºå…ƒç´ ç§»é™¤`class`ã€‚**

```jsx
/**
 *
 * @description ä¸ºå…ƒç´ ç§»é™¤class
 * @param {HTMLElement} ele
 * @param {String} cls
 */

var hasClass = require("./hasClass");

function removeClass(ele, cls) {
  // å¦‚æœå…ƒç´ å­˜åœ¨æŒ‡å®šç±»åï¼Œæ–¹å¯ç§»é™¤
  if (hasClass(ele, cls)) {
    // å£°æ˜è·å–ç±»åçš„æ­£åˆ™
    var reg = new RegExp("(\\s|^)" + cls + "(\\s|$)");

    // ä½¿ç”¨å­—ç¬¦ä¸²çš„replaceæ–¹æ³•å°†ç±»åæ›¿æ¢ä¸ºç©ºæ ¼å­—ç¬¦ä¸²
    // æœ€ç»ˆçš„classNameå¯èƒ½ä¼šæœ‰å¤šä¸ªç©ºæ ¼ï¼ŒHTMLè§„èŒƒæ¥å—å¤šä¸ªç©ºæ ¼
    ele.className = ele.className.replace(reg, " ");
  }
}
```

### getCookie

ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•æ¶‰åŠåˆ°æ“ä½œ`cookie`ï¼Œå…³äº`cookie`çš„çŸ¥è¯†å¯ä»¥å¦èµ·ä¸€ç¯‡æ–‡ç« äº†ï¼Œæˆ‘ä»¬ä¸‹å›æ¥è¯´ã€‚æœ¬æ–‡å…ˆè®²è§£æ–¹æ³•ã€‚

**æ ¹æ®`name`è¯»å–`Cookie`ã€‚**

```jsx
/**
 *
 * @description æ ¹æ®nameè¯»å–cookie
 * @param  {String} name
 * @return {String}
 */
function getCookie(name) {
  // è·å–cookieå»é™¤ç©ºæ ¼åï¼Œé€šè¿‡';'åˆ†å‰²ä¸ºé”®å€¼å¯¹(key=value)æ•°ç»„
  var arr = document.cookie.replace(/\s/g, "").split(";");
  for (var i = 0; i < arr.length; i++) {
    // åˆ†å‰²é”®å€¼å¯¹(key=value)æ•°ç»„ã€‚ç¬¬ä¸€é¡¹ä¸ºkeyï¼Œç¬¬äºŒé¡¹ä¸ºvalue
    var tempArr = arr[i].split("=");

    // å¦‚æœæŒ‡å®šnameä¸keyç›¸åŒåˆ™è¿”å›æŒ‡å®švalueã€‚è¿™é‡Œæ²¡æœ‰ä½¿ç”¨æ’ç­‰ï¼Œåº”è¯¥æ˜¯ä¸ºäº†å…¼å®¹éšå¼è½¬æ¢
    if (tempArr[0] == name) {
      // cookieçš„valueä¼šè¿›è¡Œç¼–ç ï¼Œå› æ­¤éœ€è¦è°ƒç”¨APIè¿›è¡Œè§£ç å¹¶è¿”å›
      return decodeURIComponent(tempArr[1]);
    }
  }
  return "";
}
```

**tips:**

`encodeURI()`ä¸ä¼šå¯¹æœ¬èº«å±äº URI çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œç¼–ç ï¼Œä¾‹å¦‚å†’å·ã€æ­£æ–œæ ã€é—®å·å’Œäº•å­—å·ï¼›è€Œ`encodeURIComponent()`åˆ™ä¼šå¯¹å®ƒå‘ç°çš„**ä»»ä½•éæ ‡å‡†å­—ç¬¦**è¿›è¡Œç¼–ç (æ›¿æ¢æ‰€æœ‰éå­—æ¯æ•°å­—å­—ç¬¦)ã€‚å› æ­¤ä½¿ç”¨åè€…å¯ä»¥ç¼–ç æ›´å¤šçš„å­—ç¬¦ï¼Œé˜²æ­¢ XSS æ”»å‡»ã€‚åŒæ ·çš„ï¼Œè§£ç å°±éœ€è¦ä½¿ç”¨å¯¹åº”çš„æ–¹æ³•`decodeURIComponent()` ã€‚

### setCookie

**è®¾ç½®`cookie`ã€‚**

```jsx
/**
 *
 * @description  è®¾ç½®Cookie
 * @param {String} name
 * @param {String} value
 * @param {Number} days
 */
function setCookie(name, value, days) {
  var date = new Date();

  // æ ¹æ®å½“åœ°æ—¶é—´è·å–æŒ‡å®šæ—¥æœŸï¼ŒåŠ ä¸Šdayså‚æ•°åï¼Œå†æ›´æ”¹æ—¥æœŸã€‚
  date.setDate(date.getDate() + days);

  // è®¾ç½®æŒ‡å®šçš„key=valueï¼Œå¹¶ä¸”åŠ ä¸Šè¿‡æœŸæ—¶é—´
  document.cookie = name + "=" + value + ";expires=" + date;
}
```

è¡¥å……å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š

1ã€`Date.prototype.getDate()` è¿”å›å½“åœ°æ—¶é—´ä¸‹æŒ‡å®šæœˆä»½çš„æ—¥æœŸã€‚æ¯”å¦‚ä»Šå¤©æ˜¯`2022-01-02`ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›æ•°å­—`2` ã€‚è¿”å›å€¼æ˜¯ä»‹äº`1-31`çš„æ•´æ•°ã€‚

2ã€`Date.prototype.setDate()` æ›´æ”¹å½“åœ°æ—¶é—´ä¸‹æŒ‡å®šæœˆä»½çš„æ—¥æœŸã€‚æ¥æ”¶çš„å‚æ•°æ˜¯æœˆä»½æ—¥æœŸçš„æ•´æ•°å€¼ã€‚

3ã€è®¾ç½®`cookie`å¯ä»¥ç›´æ¥èµ‹å€¼ç»™`document.cookie` ï¼Œæ­¤æ—¶ä¼šæ–°å¢ä¸€æ¡`cookie`ï¼Œè€Œä¸æ˜¯è¦†ç›–å·²æœ‰çš„ã€‚è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ–¹æ³•å°±æ˜¯å¢åŠ `expires`å±æ€§ã€‚è¯¥å±æ€§çš„å€¼å°±æ˜¯**ä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼ˆUTCï¼‰**ã€‚

4ã€JavaScript çš„æ—¶é—´ç”±**ä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼ˆUTCï¼‰**1970 å¹´ 1 æœˆ 1 æ—¥å¼€å§‹ï¼Œç”¨æ¯«ç§’è®¡æ—¶ï¼Œä¸€å¤©ç”± **86,400,000** æ¯«ç§’ç»„æˆã€‚`Date`Â  å¯¹è±¡çš„èŒƒå›´æ˜¯ **-100,000,000** å¤©è‡³ **100,000,000** å¤©ï¼ˆç­‰æ•ˆçš„æ¯«ç§’å€¼ï¼‰ã€‚

5ã€ä»¥ä¸€ä¸ªå‡½æ•°çš„å½¢å¼æ¥è°ƒç”¨ Â `Date`Â  å¯¹è±¡ï¼ˆå³ä¸ä½¿ç”¨ Â `new`Â  æ“ä½œç¬¦ï¼‰ä¼šè¿”å›ä¸€ä¸ªä»£è¡¨å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„**å­—ç¬¦ä¸²**ã€‚

### removeCookie

**æ ¹æ®`name`åˆ é™¤`cookie`ã€‚**

```jsx
/**
 *
 * @description æ ¹æ®nameåˆ é™¤cookie
 * @param  {String} name
 */
var setCookie = require("./setCookie");

function removeCookie(name) {
  // è®¾ç½®å·²è¿‡æœŸï¼Œç³»ç»Ÿä¼šç«‹åˆ»åˆ é™¤cookie
  setCookie(name, "1", -1);
}
```

### getExplore

**è·å–æµè§ˆå™¨çš„ç±»å‹å’Œç‰ˆæœ¬ã€‚**

```jsx
/**
 *
 * @description è·å–æµè§ˆå™¨ç±»å‹å’Œç‰ˆæœ¬
 * @return {String}
 */
function getExplore() {
  var sys = {},
    ua = navigator.userAgent.toLowerCase(),
    s;

  // é€šè¿‡æ­£åˆ™åŒ¹é…ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²ï¼Œæ¥å­˜å‚¨å…·ä½“çš„æµè§ˆå™¨ç±»å‹å’Œç‰ˆæœ¬
  (s = ua.match(/rv:([\d.]+)\) like gecko/))
    ? (sys.ie = s[1])
    : (s = ua.match(/msie ([\d\.]+)/))
    ? (sys.ie = s[1])
    : (s = ua.match(/edge\/([\d\.]+)/))
    ? (sys.edge = s[1])
    : (s = ua.match(/firefox\/([\d\.]+)/))
    ? (sys.firefox = s[1])
    : (s = ua.match(/(?:opera|opr).([\d\.]+)/))
    ? (sys.opera = s[1])
    : (s = ua.match(/chrome\/([\d\.]+)/))
    ? (sys.chrome = s[1])
    : (s = ua.match(/version\/([\d\.]+).*safari/))
    ? (sys.safari = s[1])
    : 0;
  // æ ¹æ®å…³ç³»è¿›è¡Œåˆ¤æ–­
  if (sys.ie) return "IE: " + sys.ie;
  if (sys.edge) return "EDGE: " + sys.edge;
  if (sys.firefox) return "Firefox: " + sys.firefox;
  if (sys.chrome) return "Chrome: " + sys.chrome;
  if (sys.opera) return "Opera: " + sys.opera;
  if (sys.safari) return "Safari: " + sys.safari;
  return "Unkonwn";
}
```

è¡¥å……çŸ¥è¯†ï¼š

`String.prototype.match()` æ–¹æ³•æ£€ç´¢è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœã€‚å…¶ä¸­ï¼Œå‚æ•°ä¸º**æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡**ã€‚

å¦‚æœä¼ å…¥ä¸€ä¸ªéæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œåˆ™ä¼šéšå¼åœ°ä½¿ç”¨ Â `new RegExp(obj)`Â  å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª Â `RegExp`Â ã€‚å¦‚æœä½ æ²¡æœ‰ç»™å‡ºä»»ä½•å‚æ•°å¹¶ç›´æ¥ä½¿ç”¨`match()`æ–¹æ³• Â ï¼Œä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å«ç©ºå­—ç¬¦ä¸²çš„æ•°ç»„ï¼š`[""]` ã€‚

è¿”å›å€¼åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š

- å¦‚æœä½¿ç”¨ g æ ‡å¿—ï¼Œåˆ™å°†è¿”å›ä¸å®Œæ•´æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„**æ‰€æœ‰ç»“æœ**ï¼Œä½†ä¸ä¼šè¿”å›æ•è·ç»„ã€‚
- å¦‚æœæœªä½¿ç”¨ g æ ‡å¿—ï¼Œåˆ™ä»…è¿”å›**ç¬¬ä¸€ä¸ªå®Œæ•´**åŒ¹é…åŠå…¶ç›¸å…³çš„æ•è·ç»„ï¼ˆ`Array`ï¼‰ã€‚

ä¸Šè¿°ç¤ºä¾‹ä¸­æ²¡æœ‰ä½¿ç”¨å…¨å±€æ ‡å¿—ï¼Œå› æ­¤è¿”å›ç¬¬ä¸€ä¸ªå®Œæ•´åŒ¹é…åŠå…¶æ•è·ç»„ã€‚æ‰“å°ä¸€ä¸‹`s`çœ‹çœ‹ï¼š

```jsx
['chrome/96.0.4664.110', '96.0.4664.110', index: 87, input: 'mozilla/5.0 (macintosh; intel mac os x 10_14_6) applewebkit/537.36 (khtml, like gecko) chrome/96.0.4664.110 safari/537.36', groups: undefined]
```

è¿”å›ç»“æœæ˜¯ä¸€ä¸ª**æ•°ç»„**ã€‚å…¶ä¸­æœ‰ä¸‰ä¸ªé™„åŠ å±æ€§ï¼š

- `groups`: ä¸€ä¸ªæ•è·ç»„æ•°ç»„ æˆ– Â `undefined`ï¼ˆå¦‚æœæ²¡æœ‰å®šä¹‰å‘½åæ•è·ç»„ï¼‰ã€‚
- `index`: åŒ¹é…çš„ç»“æœçš„å¼€å§‹ä½ç½®ã€‚
- `input`: æœç´¢çš„å­—ç¬¦ä¸²ã€‚

æˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„æµè§ˆå™¨ç‰ˆæœ¬å°±å­˜åœ¨äºè¿”å›ç»“æœçš„ç¬¬äºŒé¡¹ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæºç é‡Œé¢èµ‹å€¼ä½¿ç”¨çš„`s[1]` ã€‚

è¿˜æœ‰ä¸€ä¸ªæœ‰æ„æ€çš„ç‚¹ï¼Œå½“å°è¯•å°†è¿”å›ç»“æœè¿›è¡Œå­—ç¬¦ä¸²åŒ–ï¼Œå‘ç°ç»“æœä¼šçœç•¥é™„åŠ å±æ€§ã€‚åªä¿ç•™äº†ç´¢å¼•æ˜¯æ•°å­—çš„å€¼ã€‚

```jsx
JSON.stringify(s); // '["chrome/96.0.4664.110","96.0.4664.110"]'
```

### getOS

**è·å–æ“ä½œç³»ç»Ÿç±»å‹ã€‚**

```jsx
/**
 *
 * @description è·å–æ“ä½œç³»ç»Ÿç±»å‹
 * @return {String}
 */
function getOS() {
  // è·å–navigatorç›¸å…³å±æ€§ï¼Œå¹¶è¿›è¡Œç±»å‹ä¿æŠ¤
  var userAgent =
    ("navigator" in window &&
      "userAgent" in navigator &&
      navigator.userAgent.toLowerCase()) ||
    "";
  var vendor =
    ("navigator" in window &&
      "vendor" in navigator &&
      navigator.vendor.toLowerCase()) ||
    "";
  var appVersion =
    ("navigator" in window &&
      "appVersion" in navigator &&
      navigator.appVersion.toLowerCase()) ||
    "";

  // é€šè¿‡æ­£åˆ™æ¥åˆ¤æ–­ç›¸å…³æ“ä½œç³»ç»Ÿç±»å‹ï¼Œå¹¶è¿”å›ç›¸å…³å­—ç¬¦ä¸²
  if (
    /iphone/i.test(userAgent) ||
    /ipad/i.test(userAgent) ||
    /ipod/i.test(userAgent)
  )
    return "ios";
  if (/android/i.test(userAgent)) return "android";
  if (/win/i.test(appVersion) && /phone/i.test(userAgent))
    return "windowsPhone";
  if (/mac/i.test(appVersion)) return "MacOSX";
  if (/win/i.test(appVersion)) return "windows";
  if (/linux/i.test(appVersion)) return "linux";
}
```

### getScrollTop

**è·å–æ»šåŠ¨æ¡è·é¡¶éƒ¨çš„è·ç¦»ã€‚**

```jsx
/**
 *
 * @description è·å–æ»šåŠ¨æ¡è·é¡¶éƒ¨çš„è·ç¦»
 */
function getScrollTop() {
  // ä¼˜å…ˆè·å–document.documentElementä¸‹çš„å±æ€§
  return (
    (document.documentElement && document.documentElement.scrollTop) ||
    document.body.scrollTop
  );
}
```

è¡¥å……çŸ¥è¯†ï¼š

**`Document.documentElement`**Â  æ˜¯ä¸€ä¸ªä¼šè¿”å›æ–‡æ¡£å¯¹è±¡ï¼ˆ`document`ï¼‰çš„**æ ¹å…ƒç´ **çš„**åªè¯»**å±æ€§ï¼ˆå¦‚`HTML`æ–‡æ¡£çš„`<html>`å…ƒç´ ï¼‰ã€‚

å¯¹äºä»»ä½•éç©º `HTML` æ–‡æ¡£ï¼Œè°ƒç”¨ Â `document.documentElement`Â  æ€»æ˜¯ä¼šè¿”å›ä¸€ä¸ª`<html>`å…ƒç´ ï¼Œä¸”å®ƒä¸€å®šæ˜¯è¯¥æ–‡æ¡£çš„æ ¹å…ƒç´ ã€‚å€ŸåŠ©è¿™ä¸ªåªè¯»å±æ€§ï¼Œèƒ½æ–¹ä¾¿åœ°è·å–åˆ°ä»»æ„æ–‡æ¡£çš„`æ ¹å…ƒç´ `ã€‚

### setScrollTop

**è®¾ç½®æ»šåŠ¨æ¡è·é¡¶éƒ¨çš„è·ç¦»ã€‚**

```jsx
/**
 *
 * @description è®¾ç½®æ»šåŠ¨æ¡è·é¡¶éƒ¨çš„è·ç¦»
 * @param {Number} value
 */
function setScrollTop(value) {
  // ä½¿ç”¨window.scrollToæ»šåŠ¨åˆ°è·é¡¶éƒ¨xè½´ä¸º0ï¼Œyè½´ä¸ºvalueçš„è·ç¦»
  window.scrollTo(0, value);
  return value;
}
```

è¡¥å……çŸ¥è¯†ï¼š

1ã€`Window.scrollTo()` è¡¨ç¤ºæ»šåŠ¨åˆ°æ–‡æ¡£ä¸­çš„æŸä¸ªåæ ‡ã€‚

2ã€æ¥å—ä¸¤ç§ç±»å‹çš„å‚æ•°ï¼š

1. `window.scrollTo(x-coord,y-coord)` ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ¨ªè½´åæ ‡ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºçºµè½´åæ ‡ã€‚
2. `window.scrollTo(options)` ã€‚å…¶ä¸­ï¼Œ`options`æ˜¯ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå±æ€§çš„å¯¹è±¡ã€‚
   1. `top` ç­‰åŒäº`y-coord`ã€‚
   2. `left`ç­‰åŒäº`x-coord`ã€‚
   3. `behavior` \*\*ç±»å‹`String`,è¡¨ç¤ºæ»šåŠ¨è¡Œä¸º,æ”¯æŒå‚æ•° `smooth`(å¹³æ»‘æ»šåŠ¨),`instant`(ç¬é—´æ»šåŠ¨),é»˜è®¤å€¼`auto` (æ•ˆæœä¹Ÿæ˜¯ç¬é—´æ»šåŠ¨)ã€‚

ä¸¾ä¸ª ğŸŒ°ï¼š

```jsx
window.scrollTo(0, 1000);

// è®¾ç½®æ»šåŠ¨è¡Œä¸ºæ”¹ä¸ºå¹³æ»‘çš„æ»šåŠ¨
window.scrollTo({
  top: 1000,
  behavior: "smooth",
});
```

### offset

**è·å–å…ƒç´ è·ç¦»æ–‡æ¡£(`document`)çš„ä½ç½®ã€‚**

```jsx
/**
 *
 * @description  è·å–ä¸€ä¸ªå…ƒç´ çš„è·ç¦»æ–‡æ¡£(document)çš„ä½ç½®ï¼Œç±»ä¼¼jQä¸­çš„offset()
 * @param {HTMLElement} ele
 * @returns { {left: number, top: number} }
 */
function offset(ele) {
    var pos = {
        left: 0,
        top: 0
    };

		// å¾ªç¯è·å–å…ƒç´ çš„offsetLeftå’ŒoffsetTopå±æ€§ï¼Œå¹¶ç´¯åŠ åˆ°posä¸­
    while (ele) {
        pos.left += ele.offsetLeft;
        pos.top += ele.offsetTop;

				// eleæŒ‡å‘è¯¥å…ƒç´ çš„å®šä½å…ƒç´ æˆ–è€…æœ€è¿‘çš„Â table,td,th,bodyå…ƒç´ 
				**//** å…¶ä¸­bodyå…ƒç´ çš„offsetParentå±æ€§ä¸ºnull
        ele = ele.offsetParent;
    };
    return pos;
}
```

è¡¥å……çŸ¥è¯†ï¼š

1ã€`HTMLElement.offsetLeft`Â  æ˜¯ä¸€ä¸ª**åªè¯»**å±æ€§ï¼Œè¿”å›å½“å‰å…ƒç´ **å·¦ä¸Šè§’**ç›¸å¯¹äº Â `HTMLElement.offsetParent`Â  èŠ‚ç‚¹çš„å·¦è¾¹ç•Œåç§»çš„åƒç´ å€¼ã€‚

2ã€`HTMLElement.offsetTop` \*\*\*\*åŒç†ã€‚

3ã€å¯¹å—çº§å…ƒç´ æ¥è¯´ï¼Œ`offsetTop`ã€`offsetLeft`ã€`offsetWidth`Â  åŠ Â `offsetHeight`Â  æè¿°äº†å…ƒç´ ç›¸å¯¹äº Â `offsetParent`Â  çš„è¾¹ç•Œæ¡†ã€‚

4ã€ç„¶è€Œï¼Œå¯¹äºå¯è¢«æˆªæ–­åˆ°ä¸‹ä¸€è¡Œçš„è¡Œå†…å…ƒç´ ï¼ˆå¦‚ Â **span**ï¼‰ï¼Œ`offsetTop`Â  å’Œ Â `offsetLeft`Â  æè¿°çš„æ˜¯*ç¬¬ä¸€ä¸ª*è¾¹ç•Œæ¡†çš„ä½ç½®ï¼ˆä½¿ç”¨ Â `Element.getClientRects()`Â  æ¥è·å–å…¶å®½åº¦å’Œé«˜åº¦ï¼‰ï¼Œè€Œ Â `offsetWidth`Â  å’Œ Â `offsetHeight`Â  æè¿°çš„æ˜¯è¾¹ç•Œæ¡†çš„å°ºå¯¸ï¼ˆä½¿ç”¨ Â `Element.getBoundingClientRect`Â  æ¥è·å–å…¶ä½ç½®ï¼‰ã€‚å› æ­¤ï¼Œä½¿ç”¨ Â `offsetLeftã€offsetTopã€offsetWidth`ã€`offsetHeight`Â  æ¥å¯¹åº” leftã€topã€width å’Œ height çš„ä¸€ä¸ªç›’å­å°†ä¸ä¼šæ˜¯æ–‡æœ¬å®¹å™¨ span çš„ç›’å­è¾¹ç•Œã€‚

5ã€`HTMLElement.offsetParent` æ˜¯ä¸€ä¸ª**åªè¯»**å±æ€§ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘æœ€è¿‘çš„ï¼ˆæŒ‡åŒ…å«å±‚çº§ä¸Šçš„æœ€è¿‘ï¼‰åŒ…å«è¯¥å…ƒç´ çš„å®šä½å…ƒç´ æˆ–è€…æœ€è¿‘çš„ Â `table,td,th,body`å…ƒç´ ã€‚å½“å…ƒç´ çš„ Â `style.display`Â  è®¾ç½®ä¸º "none" æ—¶ï¼Œ`offsetParent`Â  è¿”å› Â `null`ã€‚

### scrollTo

**åœ¨ ${duration}æ—¶é—´å†…ï¼Œæ»šåŠ¨æ¡å¹³æ»‘æ»šåŠ¨åˆ° ${to}æŒ‡å®šä½ç½®ã€‚**

```jsx
var getScrollTop = require("./getScrollTop");
var setScrollTop = require("./setScrollTop");

// ä½¿ç”¨è¯¥APIæ¥é€å¸§æ»šåŠ¨ï¼Œè¾¾åˆ°å¹³æ»‘çš„æ•ˆæœ
// åšäº†å…¼å®¹æ€§å¤„ç†ï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒåˆ™é€€åŒ–ä¸ºå®ä»»åŠ¡å®šæ—¶å™¨è§¦å‘
var requestAnimFrame = (function () {
  return (
    window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    function (callback) {
      window.setTimeout(callback, 1000 / 60);
    }
  );
})();
/**
 *
 * @description  åœ¨ ${duration}æ—¶é—´å†…ï¼Œæ»šåŠ¨æ¡å¹³æ»‘æ»šåŠ¨åˆ° ${to}æŒ‡å®šä½ç½®
 * @param {Number} to
 * @param {Number} duration
 */
function scrollTo(to, duration) {
  // å¦‚æœæ—¶é—´å°äº0ï¼Œåˆ™ç›´æ¥æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®
  // äº¦æ˜¯é€’å½’ç»ˆæ­¢æ¡ä»¶
  if (duration < 0) {
    setScrollTop(to);
    return;
  }

  // è®¡ç®—æŒ‡å®šä½ç½®å’Œå½“å‰ä½ç½®çš„å·®å€¼ï¼Œå¯èƒ½ä¸ºè´Ÿæ•°
  var diff = to - getScrollTop();

  // å¦‚æœæŒ‡å®šä½ç½®å°±æ˜¯å½“å‰ä½ç½®ï¼Œåˆ™è¿”å›
  if (diff === 0) return;

  // æŒ‡å®šæ»šåŠ¨çš„æ­¥é•¿
  var step = (diff / duration) * 10;
  requestAnimFrame(function () {
    // å¦‚æœæ­¥é•¿ç»å¯¹å€¼å¤§äºå·®å€¼ç»å¯¹å€¼ï¼Œé‚£ä¹ˆåˆ™ç›´æ¥æ»šåŠ¨å·®å€¼çš„è·ç¦»ï¼Œå¹¶è¿”å›
    // è¿™é‡Œä½¿ç”¨ç»å¯¹å€¼æ˜¯å› ä¸ºå·®å€¼å¯èƒ½ä¸ºè´Ÿæ•°
    if (Math.abs(step) > Math.abs(diff)) {
      setScrollTop(getScrollTop() + diff);
      return;
    }

    // æ ¹æ®æ­¥é•¿é€å¸§æ»šåŠ¨
    setScrollTop(getScrollTop() + step);

    // åˆ¤æ–­ä¸´ç•Œå€¼æ¡ä»¶ï¼Œè¾¾åˆ°ä»¥ä¸‹æ¡ä»¶åˆ™æ„å‘³ç€å·²ç»æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®
    // å¦‚æœè¶…è¿‡æŒ‡å®šä½ç½®ä¹Ÿå°±æ˜¯getScrollTop()å¤§äºæˆ–è€…å°äºtoæ—¶ï¼Œä¼šåœ¨ä¸‹ä¸€å¸§èµ°åˆ°ä¸Šé¢returnçš„æ¡ä»¶
    if (
      (diff > 0 && getScrollTop() >= to) ||
      (diff < 0 && getScrollTop() <= to)
    ) {
      return;
    }

    // é€’å½’è°ƒç”¨ï¼Œæ—¶é—´å‡å»16msæ˜¯å› ä¸ºä¸€å¸§ä¸º1000 / 60 ç­‰äº 16.67ms
    scrollTo(to, duration - 16);
  });
}
```

### windowResize

**H5 è½¯é”®ç›˜ç¼©å›ã€å¼¹èµ·å›è°ƒã€‚**

```jsx
/**
 *
 * @description H5è½¯é”®ç›˜ç¼©å›ã€å¼¹èµ·å›è°ƒ
 * å½“è½¯ä»¶é”®ç›˜å¼¹èµ·ä¼šæ”¹å˜å½“å‰ window.innerHeightï¼Œç›‘å¬è¿™ä¸ªå€¼å˜åŒ–
 * @param {Function} downCb å½“è½¯é”®ç›˜å¼¹èµ·åï¼Œç¼©å›çš„å›è°ƒ
 * @param {Function} upCb å½“è½¯é”®ç›˜å¼¹èµ·çš„å›è°ƒ
 */

function windowResize(downCb, upCb) {
  var clientHeight = window.innerHeight;

  // å…¼å®¹å¤„ç†å‚æ•°ï¼Œé˜²æ­¢ä¼ å…¥éå‡½æ•°
  downCb = typeof downCb === "function" ? downCb : function () {};
  upCb = typeof upCb === "function" ? upCb : function () {};

  // ç›‘å¬resizeäº‹ä»¶
  window.addEventListener("resize", () => {
    var height = window.innerHeight;

    // resizeäº‹ä»¶è§¦å‘åï¼Œå¦‚æœä¸¤æ¬¡innerHeightç›¸ç­‰ï¼Œåˆ™æ„å‘³ç€è½¯é”®ç›˜å°†è¦æ”¶ç¼©
    if (height === clientHeight) {
      downCb();
    }

    // innerHeightå˜å°æ„å‘³ç€è½¯é”®ç›˜å°†è¦å¼¹èµ·
    if (height < clientHeight) {
      upCb();
    }
  });
}
```

### throttle

**å‡½æ•°èŠ‚æµã€‚**

```jsx
/**
 * @description  å‡½æ•°èŠ‚æµã€‚
 * é€‚ç”¨äºé™åˆ¶`resize`å’Œ`scroll`ç­‰å‡½æ•°çš„è°ƒç”¨é¢‘ç‡
 *
 * @param  {Number}    delay          0 æˆ–è€…æ›´å¤§çš„æ¯«ç§’æ•°ã€‚ å¯¹äºäº‹ä»¶å›è°ƒï¼Œå¤§çº¦100æˆ–250æ¯«ç§’ï¼ˆæˆ–æ›´é«˜ï¼‰çš„å»¶è¿Ÿæ˜¯æœ€æœ‰ç”¨çš„ã€‚
 * @param  {Boolean}   noTrailing     å¯é€‰ï¼Œé»˜è®¤ä¸ºfalseã€‚
 *                                    å¦‚æœnoTrailingä¸ºtrueï¼Œå½“èŠ‚æµå‡½æ•°è¢«è°ƒç”¨ï¼Œæ¯è¿‡`delay`æ¯«ç§’`callback`ä¹Ÿå°†æ‰§è¡Œä¸€æ¬¡ã€‚
 *                                    å¦‚æœnoTrailingä¸ºfalseæˆ–è€…æœªä¼ å…¥ï¼Œ`callback`å°†åœ¨æœ€åä¸€æ¬¡è°ƒç”¨èŠ‚æµå‡½æ•°åå†æ‰§è¡Œä¸€æ¬¡.
 *                                    ï¼ˆå»¶è¿Ÿ`delay`æ¯«ç§’ä¹‹åï¼ŒèŠ‚æµå‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨,å†…éƒ¨è®¡æ•°å™¨ä¼šå¤ä½ï¼‰
 * @param  {Function}  callback       å»¶è¿Ÿæ¯«ç§’åæ‰§è¡Œçš„å‡½æ•°ã€‚`this`ä¸Šä¸‹æ–‡å’Œæ‰€æœ‰å‚æ•°éƒ½æ˜¯æŒ‰åŸæ ·ä¼ é€’çš„ï¼Œ
 *                                    æ‰§è¡Œå»èŠ‚æµåŠŸèƒ½æ—¶ï¼Œè°ƒç”¨`callback`ã€‚
 * @param  {Boolean}   debounceMode   å¦‚æœ`debounceMode`ä¸ºtrueï¼Œ`clear`åœ¨`delay`msåæ‰§è¡Œã€‚
 *                                    å¦‚æœdebounceModeæ˜¯falseï¼Œ`callback`åœ¨`delay` msä¹‹åæ‰§è¡Œã€‚
 *
 * @return {Function}  æ–°çš„èŠ‚æµå‡½æ•°
 */
module.exports = function throttle(delay, noTrailing, callback, debounceMode) {
  // After wrapper has stopped being called, this timeout ensures that
  // `callback` is executed at the proper times in `throttle` and `end`
  // debounce modes.
  var timeoutID;

  // Keep track of the last time `callback` was executed.
  var lastExec = 0;

  // `noTrailing` defaults to falsy.
  if (typeof noTrailing !== "boolean") {
    debounceMode = callback;
    callback = noTrailing;
    noTrailing = undefined;
  }

  // The `wrapper` function encapsulates all of the throttling / debouncing
  // functionality and when executed will limit the rate at which `callback`
  // is executed.
  function wrapper() {
    var self = this;
    var elapsed = Number(new Date()) - lastExec;
    var args = arguments;

    // Execute `callback` and update the `lastExec` timestamp.
    function exec() {
      lastExec = Number(new Date());
      callback.apply(self, args);
    }

    // If `debounceMode` is true (at begin) this is used to clear the flag
    // to allow future `callback` executions.
    function clear() {
      timeoutID = undefined;
    }

    if (debounceMode && !timeoutID) {
      // Since `wrapper` is being called for the first time and
      // `debounceMode` is true (at begin), execute `callback`.
      exec();
    }

    // Clear any existing timeout.
    if (timeoutID) {
      clearTimeout(timeoutID);
    }

    if (debounceMode === undefined && elapsed > delay) {
      // In throttle mode, if `delay` time has been exceeded, execute
      // `callback`.
      exec();
    } else if (noTrailing !== true) {
      // In trailing throttle mode, since `delay` time has not been
      // exceeded, schedule `callback` to execute `delay` ms after most
      // recent execution.
      //
      // If `debounceMode` is true (at begin), schedule `clear` to execute
      // after `delay` ms.
      //
      // If `debounceMode` is false (at end), schedule `callback` to
      // execute after `delay` ms.
      timeoutID = setTimeout(
        debounceMode ? clear : exec,
        debounceMode === undefined ? delay - elapsed : delay
      );
    }
  }

  // Return the wrapper function.
  return wrapper;
};
```

### debounce

**å‡½æ•°é˜²æŠ–ã€‚**

```jsx
var throttle = require("./throttle");

/**
 * @description å‡½æ•°é˜²æŠ– 
 * ä¸throttleä¸åŒçš„æ˜¯ï¼Œdebounceä¿è¯ä¸€ä¸ªå‡½æ•°åœ¨å¤šå°‘æ¯«ç§’å†…ä¸å†è¢«è§¦å‘ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œ
 * è¦ä¹ˆåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨returnçš„é˜²æŠ–å‡½æ•°æ—¶æ‰§è¡Œï¼Œè¦ä¹ˆåœ¨å»¶è¿ŸæŒ‡å®šæ¯«ç§’åè°ƒç”¨ã€‚
 * @example é€‚ç”¨åœºæ™¯ï¼šå¦‚åœ¨çº¿ç¼–è¾‘çš„è‡ªåŠ¨å­˜å‚¨é˜²æŠ–ã€‚
 * @param  {Number}   delay         0æˆ–è€…æ›´å¤§çš„æ¯«ç§’æ•°ã€‚ å¯¹äºäº‹ä»¶å›è°ƒï¼Œå¤§çº¦100æˆ–250æ¯«ç§’ï¼ˆæˆ–æ›´é«˜ï¼‰çš„å»¶è¿Ÿæ˜¯æœ€æœ‰ç”¨çš„ã€‚
 * @param  {Boolean}  atBegin       å¯é€‰ï¼Œé»˜è®¤ä¸ºfalseã€‚
 *                                  å¦‚æœ`atBegin`ä¸ºfalseæˆ–æœªä¼ å…¥ï¼Œå›è°ƒå‡½æ•°åˆ™åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨returnçš„é˜²æŠ–å‡½æ•°åå»¶è¿ŸæŒ‡å®šæ¯«ç§’è°ƒç”¨ã€‚
                                    å¦‚æœ`atBegin`ä¸ºtrueï¼Œå›è°ƒå‡½æ•°åˆ™åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨returnçš„é˜²æŠ–å‡½æ•°æ—¶ç›´æ¥æ‰§è¡Œ
 * @param  {Function} callback      å»¶è¿Ÿæ¯«ç§’åæ‰§è¡Œçš„å‡½æ•°ã€‚`this`ä¸Šä¸‹æ–‡å’Œæ‰€æœ‰å‚æ•°éƒ½æ˜¯æŒ‰åŸæ ·ä¼ é€’çš„ï¼Œ
 *                                  æ‰§è¡Œå»æŠ–åŠ¨åŠŸèƒ½æ—¶ï¼Œï¼Œè°ƒç”¨`callback`ã€‚
 *
 * @return {Function} æ–°çš„é˜²æŠ–å‡½æ•°ã€‚
 */
function debounce(delay, atBegin, callback) {
  return callback === undefined
    ? throttle(delay, atBegin, false)
    : throttle(delay, callback, atBegin !== false);
}
```

### getKeyName

**æ ¹æ®`keycode`è·å¾—é”®åã€‚**

```jsx
var keyCodeMap = {
  8: "Backspace",
  9: "Tab",
  13: "Enter",
  16: "Shift",
  17: "Ctrl",
  18: "Alt",
  19: "Pause",
  20: "Caps Lock",
  27: "Escape",
  32: "Space",
  33: "Page Up",
  34: "Page Down",
  35: "End",
  36: "Home",
  37: "Left",
  38: "Up",
  39: "Right",
  40: "Down",
  42: "Print Screen",
  45: "Insert",
  46: "Delete",

  48: "0",
  49: "1",
  50: "2",
  51: "3",
  52: "4",
  53: "5",
  54: "6",
  55: "7",
  56: "8",
  57: "9",

  65: "A",
  66: "B",
  67: "C",
  68: "D",
  69: "E",
  70: "F",
  71: "G",
  72: "H",
  73: "I",
  74: "J",
  75: "K",
  76: "L",
  77: "M",
  78: "N",
  79: "O",
  80: "P",
  81: "Q",
  82: "R",
  83: "S",
  84: "T",
  85: "U",
  86: "V",
  87: "W",
  88: "X",
  89: "Y",
  90: "Z",

  91: "Windows",
  93: "Right Click",

  96: "Numpad 0",
  97: "Numpad 1",
  98: "Numpad 2",
  99: "Numpad 3",
  100: "Numpad 4",
  101: "Numpad 5",
  102: "Numpad 6",
  103: "Numpad 7",
  104: "Numpad 8",
  105: "Numpad 9",
  106: "Numpad *",
  107: "Numpad +",
  109: "Numpad -",
  110: "Numpad .",
  111: "Numpad /",

  112: "F1",
  113: "F2",
  114: "F3",
  115: "F4",
  116: "F5",
  117: "F6",
  118: "F7",
  119: "F8",
  120: "F9",
  121: "F10",
  122: "F11",
  123: "F12",

  144: "Num Lock",
  145: "Scroll Lock",
  182: "My Computer",
  183: "My Calculator",
  186: ";",
  187: "=",
  188: ",",
  189: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'",
};
/**
 * @description æ ¹æ®keycodeè·å¾—é”®å
 * @param  {Number} keycode
 * @return {String}
 */
function getKeyName(keycode) {
  // å¦‚æœkeycodeå­˜åœ¨äºç»´æŠ¤çš„æ•£åˆ—è¡¨é‡Œï¼Œåˆ™è¿”å›å¯¹åº”çš„å€¼
  if (keyCodeMap[keycode]) {
    return keyCodeMap[keycode];

    // å¦åˆ™æ‰“å°é”™è¯¯ï¼Œå¹¶è¿”å›ç©ºå­—ç¬¦ä¸²
  } else {
    console.log("Unknow Key(Key Code:" + keycode + ")");
    return "";
  }
}
```

### deepClone

**æ·±æ‹·è´ã€‚**

```jsx
/**
 * @description æ·±æ‹·è´ï¼Œæ”¯æŒå¸¸è§ç±»å‹
 * @param {Any} values
 * @return {Any}
 */
function deepClone(values) {
  var copy;

  // å¤„ç†nullã€undefinedä»¥åŠåŸå§‹ç±»å‹çš„æƒ…å†µï¼Œç›´æ¥è¿”å›
  if (null == values || "object" != typeof values) return values;

  // å¤„ç†Dateï¼Œå…ˆè·å–æ—¶é—´ï¼Œå†è®¾ç½®æ—¶é—´å¹¶è¿”å›
  if (values instanceof Date) {
    copy = new Date();
    copy.setTime(values.getTime());
    return copy;
  }

  // å¤„ç†æ•°ç»„ï¼Œå¾ªç¯æ¯ä¸€é¡¹ï¼ŒåŒæ—¶é€’å½’è°ƒç”¨æ·±æ‹·è´å‡½æ•°å¹¶èµ‹å€¼
  if (values instanceof Array) {
    copy = [];
    for (var i = 0, len = values.length; i < len; i++) {
      copy[i] = deepClone(values[i]);
    }
    return copy;
  }

  // å¤„ç†å¯¹è±¡ï¼Œå¾ªç¯æ¯ä¸€é¡¹ï¼Œå¦‚æœæ˜¯è‡ªæœ‰å±æ€§å°±é€’å½’è°ƒç”¨æ·±æ‹·è´å‡½æ•°å¹¶èµ‹å€¼
  if (values instanceof Object) {
    copy = {};
    for (var attr in values) {
      if (values.hasOwnProperty(attr)) copy[attr] = deepClone(values[attr]);
    }
    return copy;
  }

  // å¼‚å¸¸å¤„ç†
  throw new Error("Unable to copy values! Its type isn't supported.");
}
```

### isEmptyObject

**åˆ¤æ–­`obj`æ˜¯å¦ä¸ºç©ºã€‚**

```jsx
/**
 *
 * @description   åˆ¤æ–­`obj`æ˜¯å¦ä¸ºç©º
 * @param  {Object} obj
 * @return {Boolean}
 */
function isEmptyObject(obj) {
  // å¦‚æœå€¼ä¸ºfalsyã€ç±»å‹ä¸ä¸º`object`ã€æ˜¯æ•°ç»„åˆ™è¿”å›false
  if (!obj || typeof obj !== "object" || Array.isArray(obj)) return false;

  // å¦‚æœå¯¹è±¡æ²¡æœ‰è‡ªèº«å¯æšä¸¾çš„é”®ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false
  return !Object.keys(obj).length;
}
```

è¡¥å……çŸ¥è¯†ï¼š

1. **`Object.keys()`**Â  æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªç”±ä¸€ä¸ªç»™å®šå¯¹è±¡çš„**è‡ªèº«å¯æšä¸¾**å±æ€§ç»„æˆçš„æ•°ç»„ï¼Œæ•°ç»„ä¸­å±æ€§åçš„æ’åˆ—é¡ºåºå’Œæ­£å¸¸å¾ªç¯éå†è¯¥å¯¹è±¡æ—¶è¿”å›çš„é¡ºåºä¸€è‡´ ã€‚
2. **`Object.getOwnPropertyNames()`**æ–¹æ³•è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„**æ‰€æœ‰è‡ªèº«å±æ€§**çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬ Symbol å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„ã€‚

### randomColor

**éšæœºç”Ÿæˆé¢œè‰²ã€‚**æ­¤å¤„éœ€è¦è¯¦ç»†è¯´æ˜ï¼Œç»§ç»­å¾€ä¸‹çœ‹ã€‚

```jsx
/**
 *
 * @description éšæœºç”Ÿæˆé¢œè‰²
 * @return {String}
 */
function randomColor() {
  return (
    "#" + ("00000" + ((Math.random() * 0x1000000) << 0).toString(16)).slice(-6)
  );
}
```

è¡¥å……çŸ¥è¯†ï¼š

1. æ ¹æ®è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼Œä¹˜(`*`)çš„ä¼˜å…ˆçº§å¤§äºæŒ‰ä½å·¦ç§»(`<<`)ï¼Œç”±äºç”Ÿæˆçš„éšæœºé¢œè‰²æ˜¯ 16 è¿›åˆ¶çš„ 6 ä½æ•°ï¼Œå› æ­¤å°† 16 è¿›åˆ¶çš„ 7 ä½æ•°ä¸ä¼ªéšæœºç›¸ä¹˜ï¼Œç”Ÿæˆçš„ 16 è¿›åˆ¶åˆšå¥½æ˜¯ 6 ä½ã€‚
2. ç”Ÿæˆéšæœºæ•°åè¿›è¡ŒæŒ‰ä½å·¦ç§» 0 ä½ï¼Œç›®çš„æ˜¯è¿›è¡Œå–æ•´ã€‚**å·¦ç§»æ“ä½œç¬¦ Â (`<<`)**Â  å°†ç¬¬ä¸€ä¸ªæ“ä½œæ•°å‘å·¦ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œå·¦è¾¹è¶…å‡ºçš„ä½æ•°å°†ä¼šè¢«æ¸…é™¤ï¼Œå³è¾¹å°†ä¼šè¡¥é›¶ã€‚é€šè¿‡ä½è¿ç®—è¿›è¡Œå–æ•´çš„æ–¹å¼æœ‰å¦‚ä¸‹å‡ ç§ï¼š

   æ–¹å¼ 1ï¼šä¸ 0 è¿›è¡Œæˆ–è¿ç®— `x|0`

   æ–¹å¼ 2ï¼šä¸-1 è¿›è¡Œä¸è¿ç®—`x&-1`

   æ–¹å¼ 3ï¼šä¸ 0 å¼‚æˆ– `x^0`

   æ–¹å¼ 4ï¼šåŒéè¿ç®— `~~x`

   æ–¹å¼ 5ï¼šä¸åŒä¸€ä¸ªæ•°ä¸¤æ¬¡å¼‚æˆ– `x^a^a`

   æ–¹å¼ 6ï¼šå·¦ç§» 0 ä½ `x<<0`

   æ–¹å¼ 7ï¼šæœ‰ç¬¦å·å³ç§» 0 ä½ `x>>0`

   æ–¹å¼ 8ï¼šå¯¹æ­£æ•°æ— ç¬¦å·å³ç§» 0 ä½ `x>>>0`

   æ–¹å¼ 9ï¼šæ— ç¬¦å·å³ç§» 0 ä½å†ä¸ 0 è¿›è¡Œæˆ–è¿ç®— `x>>>0|0`

   æ–¹å¼ 10ï¼šæ— ç¬¦å·å³ç§» 0 ä½å†ä¸ 0 è¿›è¡Œå¼‚æˆ–è¿ç®— `x>>>0^0`

3. **`Math.random()`**Â  å‡½æ•°è¿”å›ä¸€ä¸ªæµ®ç‚¹æ•°,Â  ä¼ªéšæœºæ•°åœ¨èŒƒå›´ä»**0**åˆ°å°äº**1**([0,1))ã€‚å¦‚æœç¢°å·§éšæœºå‡º 0ï¼Œé‚£ä¹ˆéœ€è¦è¡¥é½ 6 ä½ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨`â€™00000â€™`æ·»åŠ å‰ç¼€ã€‚è¿™é‡Œè¿˜è®¾è®¡åˆ°éšå¼è½¬æ¢ï¼Œæœ€ç»ˆè½¬æ¢ä¸ºäº†å­—ç¬¦ä¸²ã€‚
4. `Number.prototype.toString()`æ–¹æ³•è¿”å›æŒ‡å®š Â `Number`Â  å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚å…¶ä¸­æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºæŒ‡å®šè¦ç”¨äºæ•°å­—åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢çš„åŸºæ•°(ä» 2 åˆ° 36)ã€‚å¦‚æœæœªæŒ‡å®šå‚æ•°ï¼Œåˆ™**é»˜è®¤å€¼ä¸º 10**ã€‚ç”±äºä½¿ç”¨ä¼ªéšæœºä¸`0x1000000` ç›¸ä¹˜å¹¶å–æ•´è¿”å›çš„æ˜¯ 10 è¿›åˆ¶ï¼Œå› æ­¤éœ€è¦é€šè¿‡`toString(16)` è½¬æ¢ä¸º 16 è¿›åˆ¶ã€‚
5. `String.prototype.slice()`æ–¹æ³•æå–æŸä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶**è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²**ï¼Œä¸”**ä¸ä¼šæ”¹åŠ¨åŸå­—ç¬¦ä¸²**ã€‚è¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚
   1. **beginIndexã€‚**ä»è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„å¼€å§‹æå–åŸå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚å¦‚æœå€¼ä¸ºè´Ÿæ•°ï¼Œä¼šè¢«å½“åš Â `strLength + beginIndex`Â  çœ‹å¾…ã€‚å…¶ä¸­`strLength` ä¸ºå­—ç¬¦ä¸²é•¿åº¦ã€‚
   2. **endIndexã€‚**è¯¥å‚æ•°å¯é€‰ã€‚åœ¨è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„ç»“æŸæå–å­—ç¬¦ä¸²ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œ`slice()`Â  ä¼šä¸€ç›´æå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚å¦‚æœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¢«çœ‹ä½œæ˜¯ `strLength + endIndex`ã€‚
6. å›åˆ°ä¸Šè¿°æºç ï¼Œæ•´ä½“æ¥çœ‹æœ€ç»ˆç»“æœä¼šæœ‰ä¸¤ç§ï¼š
   1. å½“`Math.random()` ä¸º 0 æ—¶ï¼Œ`('00000' + (Math.random() * 0x1000000 << 0).toString(16))` è¿”å› `'000000'` ã€‚é€šè¿‡`slice(-6)` ï¼ŒæŒ‰ç…§æˆªå–è§„åˆ™ï¼Œç›¸å½“äº`slice(6 + (-6))`ï¼Œä¹Ÿå°±æ˜¯`slice(0)`ï¼Œé‚£ä¹ˆæœ€ç»ˆå°±æ˜¯æˆªå–æ•´ä¸ªå­—ç¬¦ä¸²ã€‚
   2. å½“`Math.random()` ä¸ä¸º 0 æ—¶ï¼Œ`('00000' + (Math.random() * 0x1000000 << 0).toString(16))` è¿”å› `'00000bd4f6c'` (éšæœº) ã€‚æŒ‰ç…§æˆªå–è§„åˆ™ï¼Œç›¸å½“äº`slice(11 + (-6))` ï¼Œä¹Ÿå°±æ˜¯`slice(5)` ï¼Œæœ€ç»ˆæˆªå–å°±æ˜¯ä»ç¬¬ 5 ä¸ªç´¢å¼•å¼€å§‹æˆªå–ï¼Œç›´åˆ°æœ€å( `'bd4f6c'`)ã€‚
   3. æœ€åä¸€æ­¥æ‹¼æ¥`#`ï¼Œå¹¶è¿”å›ã€‚

### randomNum

**ç”ŸæˆæŒ‡å®šèŒƒå›´`[min, max]`çš„éšæœºæ•°ã€‚**

```jsx
/**
 *
 * @description ç”ŸæˆæŒ‡å®šèŒƒå›´[min, max]çš„éšæœºæ•°
 * @param  {Number} min
 * @param  {Number} max
 * @return {Number}
 */
function randomNum(min, max) {
  // å‘ä¸Šå–æ•´æœ€å°èŒƒå›´
  min = Math.ceil(min);

  // å‘ä¸‹å–æ•´æœ€å¤§èŒƒå›´
  max = Math.floor(max);

  // ç”±äºä¼ªéšæœºæ•°æ— æ³•å–1ï¼Œå› æ­¤éœ€è¦å†åŠ ä¸€è¿›è¡Œéšæœºï¼Œæ–¹å¯éšæœºåˆ°max
  // å‘ä¸‹å–æ•´æœ€å¤§å€¼ï¼Œå¹¶ä¸æœ€å°å€¼ç›¸åŠ å°±æ˜¯æœ€åçš„éšæœºå€¼
  return Math.floor(Math.random() * (max - min + 1)) + min;
}
```

### isColor

**åˆ¤æ–­æ˜¯å¦ä¸º 16 è¿›åˆ¶é¢œè‰²ã€‚**

```jsx
/**
 *
 * @description åˆ¤æ–­æ˜¯å¦ä¸º16è¿›åˆ¶é¢œè‰²ï¼Œrgb æˆ– rgba
 * @param  {String}  str
 * @return {Boolean}
 */
function isColor(str) {
  // åŒ¹é…å½¢å¦‚ #fffã€#fffffffã€rgb(255,255,255)ã€rgba(255,255,255,1.0)
  return /^(#([0-9a-fA-F]{3}){1,2}|[rR][gG][Bb](\((\s*(2[0-4]\d|25[0-5]|[01]?\d{1,2} "0-9a-fA-F]{3}){1,2}|[rR][gG][Bb")\s*,){2}\s*(2[0-4]\d|25[0-5]|[01]?\d{1,2})\s*\)|[Aa]\((\s*(2[0-4]\d|25[0-5]|[01]?\d{1,2})\s*,){3}\s*([01]|0\.\d+)\s*\)))$/.test(
    str
  );
}
```

<div align=center> <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f59bf5a363554765bb216d072fbc2c01~tplv-k3u1fbpfcp-watermark.image" width="100%"/> </div>

é€šè¿‡ä¸Šå›¾å¯ä»¥ç²¾ç¡®çš„çœ‹åˆ°æ­£åˆ™åŒ¹é…çš„æµç¨‹ã€‚ä¸è¿‡çœ‹ä¸Šå»ç»„ 5 å’Œç»„ 6 æ˜¯é‡å¤çš„ï¼Œä¸çŸ¥é“æ˜¯åˆ»æ„ä¸ºä¹‹è¿˜æ˜¯ï¼Ÿ

### isEmail

**åˆ¤æ–­æ˜¯å¦ä¸ºé‚®ç®±åœ°å€ã€‚**

```jsx
/**
 *
 * @description   åˆ¤æ–­æ˜¯å¦ä¸ºé‚®ç®±åœ°å€
 * @param  {String}  str
 * @return {Boolean}
 */
function isEmail(str) {
  // åˆ¤æ–­æ˜¯å¦ä¸ºemailæœ€æ ¸å¿ƒçš„æ˜¯@å’Œ.
  return /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(str);
}
```

<div align=center> <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d633459db0843148b8753d72ff1baa8~tplv-k3u1fbpfcp-watermark.image" width="100%"/> </div>

ä»ä¸Šå›¾ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œ`@`å’Œ`.`éƒ½æ˜¯å¿…éœ€çš„ã€‚

### isIdCard

**åˆ¤æ–­æ˜¯å¦ä¸ºèº«ä»½è¯å·ã€‚**

```jsx
/**
 *
 * @description  åˆ¤æ–­æ˜¯å¦ä¸ºèº«ä»½è¯å·
 * @param  {String|Number} str
 * @return {Boolean}
 */
function isIdCard(str) {
  return /^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(
    str
  );
}
```

<div align=center> <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59e6acd110e14f16ae4a2c4923c19e41~tplv-k3u1fbpfcp-watermark.image" width="100%"/> </div>

è¯¥æ–¹æ³•æ²¡æœ‰å¾ˆå¥½çš„åˆ¤æ–­å¹´ä»½ä»¥åŠçœå¸‚åŒºç¼–å·ã€‚å¦‚æœæƒ³è¦æ›´åŠ ç²¾ç¡®ï¼Œéœ€è¦æ ¹æ®èº«ä»½è¯çš„ç»„æˆå•ç‹¬è¿›è¡Œåˆ¤æ–­ï¼Œæ¯”å¦‚å‰ 6 ä½æ˜¯çœå¸‚åŒºçš„ç¼–å·ç­‰ç­‰ã€‚

### isPhoneNum

**åˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·ã€‚**

```jsx
/**
 *
 * @description   åˆ¤æ–­æ˜¯å¦ä¸ºæ‰‹æœºå·
 * @param  {String|Number} str
 * @return {Boolean}
 */
function isPhoneNum(str) {
  return /^(\+?0?86\-?)?1[3456789]\d{9}$/.test(str);
}
```

<div align=center> <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a57f92d143bf420e878686efba49d9c9~tplv-k3u1fbpfcp-watermark.image" width="100%"/> </div>

ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œè¯¥æ­£åˆ™è€ƒè™‘åˆ°äº†`+86` å›½å®¶ç¼–å·çš„æƒ…å†µã€‚ç„¶åæ‰‹æœºå·çš„ç¬¬äºŒä½åŒ…æ‹¬äº†`[3456789]` ã€‚

### isUrl

**åˆ¤æ–­æ˜¯å¦ä¸º URL åœ°å€ã€‚**

```jsx
/**
 *
 * @description   åˆ¤æ–­æ˜¯å¦ä¸ºURLåœ°å€
 * @param  {String} str
 * @return {Boolean}
 */
function isUrl(str) {
  return /[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(
    str
  );
}
```

<div align=center> <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2051aee00cda41c4a339df8f75214b22~tplv-k3u1fbpfcp-watermark.image" width="100%"/> </div>

### **digitUppercase**

**ç°é‡‘é¢è½¬å¤§å†™ã€‚**

```jsx
/**
 *
 * @description   ç°é‡‘é¢è½¬å¤§å†™
 * @param  {Number} n
 * @return {String}
 */
function digitUppercase(n) {
  var fraction = ["è§’", "åˆ†"];
  var digit = ["é›¶", "å£¹", "è´°", "å", "è‚†", "ä¼", "é™†", "æŸ’", "æŒ", "ç–"];
  var unit = [
    ["å…ƒ", "ä¸‡", "äº¿"],
    ["", "æ‹¾", "ä½°", "ä»Ÿ"],
  ];

  // nä¸ºè´Ÿæ•°åˆ™æ˜¯æ¬ 
  var head = n < 0 ? "æ¬ " : "";

  // å¤„ç†äº†nä¸ºè´Ÿæ•°çš„æƒ…å†µï¼Œæ­¤å¤„ç›´æ¥å–ç»å¯¹å€¼
  n = Math.abs(n);
  var s = "";

  // å¤„ç†å°æ•°ç‚¹çš„æƒ…å†µ
  for (var i = 0; i < fraction.length; i++) {
    s += (
      digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]
    ).replace(/é›¶./, "");
  }

  // å¦‚æœå¤„ç†å®Œå°æ•°ç‚¹ä¾æ—§ä¸ºç©ºï¼Œåˆ™æ„å‘³ç€æ˜¯æ•´æ•°
  s = s || "æ•´";

  // å¯¹å€¼è¿›è¡Œå‘ä¸‹å–æ•´
  n = Math.floor(n);

  // ä»ä½ä½åˆ°é«˜ä½è¿›è¡Œæ‹¼æ¥ï¼Œå¹¶ä¸”å»é™¤å¤šä½™çš„é›¶
  for (var i = 0; i < unit[0].length && n > 0; i++) {
    var p = "";
    for (var j = 0; j < unit[1].length && n > 0; j++) {
      p = digit[n % 10] + unit[1][j] + p;
      n = Math.floor(n / 10);
    }
    s = p.replace(/(é›¶.)*é›¶ $/, "").replace(/^$/, "é›¶") + unit[0][i] + s;
  }

  // è¿›è¡Œæ•´ä½“çš„æ‹¼æ¥ï¼Œå¹¶è°ƒæ•´æè¿°
  return (
    head +
    s
      .replace(/(é›¶.)*é›¶å…ƒ/, "å…ƒ")
      .replace(/(é›¶.)+/g, "é›¶")
      .replace(/^æ•´ $/, "é›¶å…ƒæ•´")
  );
}
```

### isSupportWebP

**åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ webP æ ¼å¼å›¾ç‰‡ã€‚**

```jsx
/**
 *
 * @description åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒwebPæ ¼å¼å›¾ç‰‡
 * @return {Boolean}
 */
function isSupportWebP() {
  // array.mapæ–¹æ³•æ˜¯ES5æ”¯æŒçš„æ–¹æ³•ï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒè¯¥æ–¹æ³•ï¼Œåˆ™ä¸å¯èƒ½æ”¯æŒwebP
  // åˆ›å»ºcanvaså¹¶è®¾ç½®åŒ…å«å›¾ç‰‡å±•ç¤ºçš„data urlï¼Œå¦‚æœæ”¯æŒwebPï¼Œåˆ™è¿”å›çš„å­—ç¬¦ä¸²å¼€å¤´ä¾¿æ˜¯data:image/webp
  return (
    !![].map &&
    document
      .createElement("canvas")
      .toDataURL("image/webp")
      .indexOf("data:image/webp") == 0
  );
}
```

è¡¥å……çŸ¥è¯†ï¼š

1. **`HTMLCanvasElement.toDataURL()`**Â  æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å›¾ç‰‡å±•ç¤ºçš„ Â `data URI`Â ã€‚å¯ä»¥ä½¿ç”¨`type`å‚æ•°(å¯é€‰)æŒ‡å®šç±»å‹ï¼Œé»˜è®¤ä¸º`image/png`ã€‚ç¬¬äºŒä¸ªå¯é€‰å‚æ•°æ˜¯å›¾ç‰‡è´¨é‡ï¼Œå–å€¼èŒƒå›´æ˜¯`0-1`ï¼Œä¸ä¼ æˆ–è€…è¶…å‡ºå–å€¼èŒƒå›´ï¼Œåˆ™å–é»˜è®¤å€¼ Â `0.92`ã€‚å›¾ç‰‡çš„åˆ†è¾¨ç‡ä¸º`96dpi`ã€‚è¿”å›å€¼æ˜¯åŒ…å« Â `data URI`çš„`DOMString`ã€‚

```jsx
  document.createElement('canvas').toDataURL('image/webp')

  //ä»¥ä¸‹ä¸ºè¾“å‡ºç»“æœ
  data:image/webp;base64,UklGRtgCAABXRUJQVlA4WAoAAAAwAAAAKwEAlQAASUNDUBgCAAAAAAIYAAAAAAQwAABtbnRyUkdCIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAAAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3BhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAwADEANkFMUEgSAAAAAQcQEREQkCT+/x9F9D/tf0MAVlA4IIAAAABwDQCdASosAZYAPm02mUmkIyKhICgAgA2JaW7hdrEbQAnsA99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfasAAD+/9YAAAAAAAAAAA==
```

2. å¦‚æœæµè§ˆå™¨æ”¯æŒ`webP` ï¼Œé‚£ä¹ˆ`data URI` åˆ™ä¼šä»¥`data:image/webp`å¼€å¤´ã€‚é€šè¿‡å­—ç¬¦ä¸²çš„åŸå‹æ–¹æ³•`indexOf('data:image/webp') == 0` å°±å¯ä»¥åˆ¤æ–­æ˜¯å¦æ”¯æŒã€‚
3. `Data URLs` å³å‰ç¼€ä¸º Â `data:`Â  åè®®çš„ URLï¼Œå…¶å…è®¸å†…å®¹åˆ›å»ºè€…å‘**æ–‡æ¡£ä¸­åµŒå…¥å°æ–‡ä»¶**ã€‚`Data URLs` ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼šå‰ç¼€(`data:`)ã€æŒ‡ç¤ºæ•°æ®ç±»å‹çš„`MIME`ç±»å‹ã€å¦‚æœéæ–‡æœ¬åˆ™ä¸ºå¯é€‰çš„`base64`æ ‡è®°ã€æ•°æ®æœ¬èº«ã€‚å¦‚æœ`MIME`ç±»å‹è¢«çœç•¥ï¼Œåˆ™é»˜è®¤å€¼ä¸º Â `text/plain;charset=US-ASCII` ã€‚æ³¨æ„å››ä¸ªéƒ¨åˆ†ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œåˆ†åˆ«æ˜¯`:`ã€`;`ã€`,` ã€‚

### **formatPassTime**

**æ ¼å¼åŒ–æŒ‡å®šæ—¶é—´è·ç°åœ¨çš„å·²è¿‡æ—¶é—´ã€‚**

```jsx
/**
 * @description   æ ¼å¼åŒ– ${startTime}è·ç°åœ¨çš„å·²è¿‡æ—¶é—´
 * @param  {Date} startTime
 * @return {String}
 */
function formatPassTime(startTime) {
  // è·å–å½“å‰æ—¶é—´ï¼Œè¿”å›çš„æ˜¯æ¯«ç§’æ•°
  var currentTime = Date.parse(new Date()),
    // è®¡ç®—æ—¶é—´é—´éš”
    time = currentTime - startTime,
    // åˆ†åˆ«è½¬æ¢å¹´ã€æœˆã€æ—¥ã€å°æ—¶ã€åˆ†é’Ÿ
    day = parseInt(time / (1000 * 60 * 60 * 24)),
    hour = parseInt(time / (1000 * 60 * 60)),
    min = parseInt(time / (1000 * 60)),
    month = parseInt(day / 30),
    year = parseInt(month / 12);

  // æŒ‰é¡ºåºåˆ¤æ–­å¹´ã€æœˆã€æ—¥ã€å°æ—¶ã€åˆ†é’Ÿï¼Œå¦‚æœå­˜åœ¨åˆ™æ‹¼æ¥ç›¸åº”æè¿°å¹¶è¿”å›
  if (year) return year + "å¹´å‰";
  if (month) return month + "ä¸ªæœˆå‰";
  if (day) return day + "å¤©å‰";
  if (hour) return hour + "å°æ—¶å‰";
  if (min) return min + "åˆ†é’Ÿå‰";
  // å¦‚æœæ—¶é—´é—´éš”å°äºåˆ†é’Ÿçº§åˆ«ï¼Œåˆ™ç›´æ¥è¿”å›åˆšåˆš
  else return "åˆšåˆš";
}
```

### formatRemainTime

**æ ¼å¼åŒ–ç°åœ¨è·ç¦»æŒ‡å®šæ—¶é—´çš„å‰©ä½™æ—¶é—´ã€‚**

```jsx
/**
 *
 * @description   æ ¼å¼åŒ–ç°åœ¨è· ${endTime}çš„å‰©ä½™æ—¶é—´
 * @param  {Date} endTime
 * @return {String}
 */
function formatRemainTime(endTime) {
  var startDate = new Date(); //å¼€å§‹æ—¶é—´
  var endDate = new Date(endTime); //ç»“æŸæ—¶é—´
  var t = endDate.getTime() - startDate.getTime(); //æ—¶é—´å·®
  var d = 0,
    h = 0,
    m = 0,
    s = 0;

  // å¦‚æœæ—¶é—´é—´éš”å¤§äºç­‰äº0ï¼Œåˆ™è¿›è¡Œè½¬æ¢ï¼Œå¦åˆ™ç›´æ¥è¿”å›éƒ½æ˜¯0çš„æ•°æ®
  if (t >= 0) {
    // è®¡ç®—å¤©æ•°å¹¶å‘ä¸‹å–æ•´
    d = Math.floor(t / 1000 / 3600 / 24);

    // å°æ—¶ã€åˆ†é’Ÿã€ç§’åˆ†åˆ«é€šè¿‡å–ä½™å’Œå‘ä¸‹å–æ•´æ¥æ‹¿åˆ°æ•°æ®
    h = Math.floor((t / 1000 / 60 / 60) % 24);
    m = Math.floor((t / 1000 / 60) % 60);
    s = Math.floor((t / 1000) % 60);
  }

  // è¿”å›æ‹¼æ¥çš„å‰©ä½™æ—¶é—´
  return d + "å¤© " + h + "å°æ—¶ " + m + "åˆ†é’Ÿ " + s + "ç§’";
}
```

### **isLeapYear**

**åˆ¤æ–­æ˜¯å¦ä¸ºé—°å¹´ã€‚**

```jsx
/**
 *
 * @description æ˜¯å¦ä¸ºé—°å¹´
 * @param {Number} year
 * @returns {Boolean}
 */

function isLeapYear(year) {
  // é—°å¹´çš„åˆ¤æ–­ä¾æ®æ˜¯å¹´ä»½ä¸º4çš„å€æ•°ï¼ŒåŒæ—¶å¹´ä»½ä¸æ˜¯100çš„å€æ•°æˆ–è€…æ˜¯400çš„å€æ•°
  if (0 === year % 4 && (year % 100 !== 0 || year % 400 === 0)) {
    return true;
  }
  return false;
}
```

### isSameDay

**åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€å¤©ã€‚**

```jsx
/**
 * @description   åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€å¤©
 * @param  {Date} date1
 * @param  {Date} date2 å¯é€‰ï¼é»˜è®¤å€¼ï¼šå½“å¤©
 * @return {Boolean}
 */
function isSameDay(date1, date2) {
  if (!date2) {
    date2 = new Date();
  }

  // åˆ†åˆ«è·å–ä¸¤ä¸ªå‚æ•°çš„å¹´æœˆæ—¥
  var date1_year = date1.getFullYear(),
    date1_month = date1.getMonth() + 1,
    date1_date = date1.getDate();
  var date2_year = date2.getFullYear(),
    date2_month = date2.getMonth() + 1,
    date2_date = date2.getDate();

  // æ¯”è¾ƒæ—¥æœˆå¹´æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœéƒ½ç›¸ç­‰ï¼Œåˆ™ä¸ºåŒä¸€å¤©
  // ä»åå¾€å‰æ¯”è¾ƒå¯ä»¥æå‰é€€å‡ºï¼Œé˜²æ­¢æ— æ•ˆåˆ¤æ–­
  return (
    date1_date === date2_date &&
    date1_month === date2_month &&
    date1_year === date2_year
  );
}
```

### timeLeft

**è®¡ç®—å¼€å§‹æ—¶é—´åˆ°ç»“æŸæ—¶é—´çš„å‰©ä½™æ—¶é—´ã€‚**

```jsx
/**
 * @description ${startTime - endTime}çš„å‰©ä½™æ—¶é—´,startTimeå¤§äºendTimeæ—¶ï¼Œå‡è¿”å›0
 * @param { Date | String } startTime
 * @param { Date | String } endTime
 * @returns { Object } { d, h, m, s } å¤© æ—¶ åˆ† ç§’
 */
function timeLeft(startTime, endTime) {
  // å‚æ•°ç¼ºå¤±åˆ™ç›´æ¥è¿”å›
  if (!startTime || !endTime) {
    return;
  }

  // å¦‚æœå‚æ•°æ˜¯Dateå®ä¾‹åˆ™ç›´æ¥ä½¿ç”¨ï¼Œå¦åˆ™è½¬æ¢ä¸ºDateå®ä¾‹
  // å°†æ—¶é—´æ ¼å¼çš„-è½¬æ¢ä¸º/ï¼Œæ˜¯ä¸ºäº†é€‚é…ios
  var startDate, endDate;
  if (startTime instanceof Date) {
    startDate = startTime;
  } else {
    startDate = new Date(startTime.replace(/-/g, "/")); //å¼€å§‹æ—¶é—´
  }
  if (endTime instanceof Date) {
    endDate = endTime;
  } else {
    endDate = new Date(endTime.replace(/-/g, "/")); //ç»“æŸæ—¶é—´
  }

  // è®¡ç®—å¾—åˆ°å¤©ã€æ—¶ã€åˆ†ã€ç§’
  var t = endDate.getTime() - startDate.getTime();
  var d = 0,
    h = 0,
    m = 0,
    s = 0;
  if (t >= 0) {
    d = Math.floor(t / 1000 / 3600 / 24);
    h = Math.floor((t / 1000 / 60 / 60) % 24);
    m = Math.floor((t / 1000 / 60) % 60);
    s = Math.floor((t / 1000) % 60);
  }
  return { d, h, m, s };
}
```

### monthDays

**è·å–æŒ‡å®šæ—¥æœŸæœˆä»½çš„æ€»å¤©æ•°ã€‚**

```jsx
/**
 * @description è·å–æŒ‡å®šæ—¥æœŸæœˆä»½çš„æ€»å¤©æ•°
 * @param {Date} time
 * @return {Number}
 */
function monthDays(time) {
  time = new Date(time);

  // è·å–æŒ‡å®šæ—¥æœŸçš„å¹´ä»½ï¼Œè¿”å›4ä½æ•°
  var year = time.getFullYear();

  // è·å–æŒ‡å®šæ—¥æœŸçš„æœˆä»½ï¼ŒèŒƒå›´ä¸º0-11ï¼Œå› æ­¤éœ€è¦+1
  var month = time.getMonth() + 1;

  // é€šè¿‡å½¢å¦‚new Date(year, monthIndex, day)æ¥åˆ›å»ºDateå®ä¾‹
  // ç„¶åè·å–æŒ‡å®šå¹´æœˆçš„æ€»å¤©æ•°ï¼Œè¿”å›1-31
  return new Date(year, month, 0).getDate();
}
```

### **parseQueryString**

**`url`å‚æ•°è½¬å¯¹è±¡ã€‚**é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œ`url`å‚æ•°æ˜¯`?`åé¢çš„å½¢å¦‚`key1=value1&key2=value2`çš„å€¼ã€‚

```jsx
/**
 *
 * @description   urlå‚æ•°è½¬å¯¹è±¡
 * @param  {String} url  default: window.location.href
 * @return {Object}
 */
function parseQueryString(url) {
  // å¦‚æœurlä¸ºfalsyï¼Œåˆ™ä½¿ç”¨window.location.href
  url = !url ? window.location.href : url;

  // å¦‚æœä¸å­˜åœ¨?ï¼Œæ„å‘³ç€æ²¡æœ‰æŸ¥è¯¢å‚æ•°ï¼Œç›´æ¥è¿”å›ç©ºå¯¹è±¡
  if (url.indexOf("?") === -1) {
    return {};
  }

  // å¦‚æœurlä»¥?å¼€å¤´ï¼Œåˆ™æˆªå–ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°æœ€åï¼›
  // å¦åˆ™æ‰¾åˆ°æœ€åçš„?ï¼Œå¹¶æˆªå–?ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°æœ€å
  var search =
    url[0] === "?" ? url.substr(1) : url.substring(url.lastIndexOf("?") + 1);

  // å¦‚æœ?åé¢ä¸ºç©ºï¼Œä¹Ÿæ„å‘³ç€æ²¡æœ‰æŸ¥è¯¢å‚æ•°ï¼Œè¿”å›ç©ºå¯¹è±¡
  if (search === "") {
    return {};
  }

  // åˆ†å‰²ä¸ºkey=valueç»„æˆçš„æ•°ç»„
  search = search.split("&");
  var query = {};
  for (var i = 0; i < search.length; i++) {
    // åˆ†å‰²ä¸º[key, value]
    var pair = search[i].split("=");

    // è§£ç ç›¸åº”çš„å€¼ï¼Œå¹¶èµ‹å€¼ç»™queryå¯¹è±¡
    // valueä¸ºfalsyï¼Œåˆ™é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²
    query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || "");
  }

  // æœ€åè¿”å›queryå¯¹è±¡
  return query;
}
```

è¡¥å……çŸ¥è¯†ï¼š

1. **`substr()`**Â  æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ä»æŒ‡å®šä½ç½®å¼€å§‹åˆ°æŒ‡å®šå­—ç¬¦æ•°çš„å­—ç¬¦ã€‚è¯¥å‚æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚
   1. `start`å‚æ•°ã€‚å¼€å§‹æå–å­—ç¬¦çš„ä½ç½®ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œåˆ™è¢«çœ‹ä½œ Â `strLength + startï¼Œå…¶ä¸­`Â `strLength`Â  ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
   2. `length` å‚æ•°(å¯é€‰)ã€‚æå–çš„å­—ç¬¦æ•°ã€‚
   3. **é¿å…ä½¿ç”¨**è¯¥æ–¹æ³•ï¼Œä½¿ç”¨`substring()`ä»£æ›¿ã€‚ä¸Šè¿°ç¤ºä¾‹å®Œå…¨å¯ä»¥è¿›è¡Œä»£æ›¿ã€‚
2. **`substring()`**æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¼€å§‹ç´¢å¼•åˆ°ç»“æŸç´¢å¼•ä¹‹é—´çš„ä¸€ä¸ªå­é›†, æˆ–ä»å¼€å§‹ç´¢å¼•ç›´åˆ°å­—ç¬¦ä¸²çš„æœ«å°¾çš„ä¸€ä¸ªå­é›†ã€‚è¯¥å‚æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚
   1. `indexStart` ã€‚éœ€è¦æˆªå–çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ï¼Œè¯¥ç´¢å¼•ä½ç½®çš„å­—ç¬¦ä½œä¸ºè¿”å›çš„å­—ç¬¦ä¸²çš„é¦–å­—æ¯ã€‚
   2. `indexEnd` ã€‚å¯é€‰ã€‚ä¸€ä¸ª 0 åˆ°å­—ç¬¦ä¸²é•¿åº¦ä¹‹é—´çš„æ•´æ•°ï¼Œä»¥è¯¥æ•°å­—ä¸ºç´¢å¼•çš„å­—ç¬¦**ä¸åŒ…å«**åœ¨æˆªå–çš„å­—ç¬¦ä¸²å†…ã€‚

### **stringfyQueryString**

**å¯¹è±¡åºåˆ—åŒ–ã€‚**

```jsx
/**
 *
 * @description   å¯¹è±¡åºåˆ—åŒ–
 * @param  {Object} obj
 * @return {String}
 */
function stringfyQueryString(obj) {
  // ç‰¹æ®Šå€¼å¤„ç†
  if (!obj) return "";
  var pairs = [];

  for (var key in obj) {
    var value = obj[key];

    // å¦‚æœå¯¹è±¡çš„å€¼ä¸ºæ•°ç»„ï¼Œåˆ™å¤„ç†æˆå½¢å¦‚key[i]=value
    // åŒæ—¶è¿›è¡Œç¼–ç å¤„ç†
    if (value instanceof Array) {
      for (var i = 0; i < value.length; ++i) {
        pairs.push(
          encodeURIComponent(key + "[" + i + "]") +
            "=" +
            encodeURIComponent(value[i])
        );
      }
      continue;
    }

    // å¯¹è±¡çš„å€¼ä¸æ˜¯æ•°ç»„ï¼Œåˆ™å¤„ç†æˆkey=value
    // åŒæ—¶è¿›è¡Œç¼–ç å¤„ç†
    pairs.push(encodeURIComponent(key) + "=" + encodeURIComponent(obj[key]));
  }

  // ä½¿ç”¨&æ‹¼æ¥å¹¶è¿”å›
  return pairs.join("&");
}
```

## æ€»ç»“

é€šè¿‡åˆ†æå·¥å…·åº“ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬åˆ›å»ºå‡ºè‡ªå·±çš„å·¥å…·åº“ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ä»¥ä¸Šå°±æ˜¯æ‰€æœ‰å·¥å…·åº“æ–¹æ³•çš„è§£è¯»ï¼Œå¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œè¯·å¤§å®¶å¤šå¤šæŒ‡æ•™ã€‚
